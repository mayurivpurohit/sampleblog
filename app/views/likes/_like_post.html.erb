<% like = current_user.likes.find_by_post_id(@post.id) %>
<% if like.present? %>
  <%= form_for like, :html => { :method => :delete }, :remote => true do |f| %>
    <%= f.submit "Unlike", :class => 'btn' %>
  <% end %>
<% else %>
  <%= form_for current_user.likes.build(:post_id => @post.id), :remote => true do |f| %>
    <%= f.hidden_field :post_id %>
    <%= f.hidden_field :user_id %>
    <%= f.submit "Like", class: 'btn' %>
   <% end %>
<% end %>
